suite: Public Site
testset: ToC
tests:
- title: Test Correctly Displayed Discontinued  Date
  context:
    role: anonymous
    setup:
      - To prepare to do this test make sure there are 3 journals publically available in DOAJ
      - one with discontinued date in the past
      - one with discontinued date in the future
      - one with discontinued date today
  steps:
  - step: Search for every journal from the list above
    results:
    - On the ToC of the journal with discontinued date in the past or today - the discontinued date is displayed
    - On the ToC of the journal with discontinued date in the future - the discontinued date is not displayed
- title: Test articles journal's page
  context:
    role: anonymous
  steps:
  - step: To prepare for this test, ensure that a journal is publicly available in DOAJ, containing a minimum of 4 articles, with 2 from one month and 2 from another, and these months must not be consecutive (e.g. 2 articles from January and 2 from March).
  - step: Search for the above journal
    results:
    - On the "Articles" tab in the ToC of the journal, the articles are displayed.
    - On the left, the "Month" facet is displayed.
  - step: Select one of the years from the Year facet
  - step: Select one of the months from the list
    results:
    - On the "Articles" tab in the ToC of the journal, the articles from the selected month are displayed.
    - On the left, the "Month" facet is displayed.
    - The selected month is displayed as selected in the "Month" facet.


- title: Journal with Last Full Review date
  context:
    role: anonymous
  steps:
  - step: To prepare for this test, ensure that a journal is publicly available in DOAJ with a Last Full Review date set in the past.
      You can use the testdrive setup linked here if none are available
    path: /testdrive/publisher_with_journal
  - step: Search for the above journal on the public search page (e.g. by the identifier provided by the testdrive)
    path: /search/journals
  - step: click the journal title to go to the ToC page
    results:
    - At the bottom of the ToC page is a "Last Full Review" date, showing the date set in the journal record.

- title: Update Request link behaviour for publisher and non-owner
  context:
    role: anonymous
  path: /testdrive/ur_nudge
  steps:
  - step: Go to the public page of "Journal of Exoplanetary Biosignatures" at /toc/9556-2777.
    results:
    - In the "Journal metadata" column, in the "Publisher" tile, a message is displayed "Are you associated with this journal? Help us keep your record accurate! Click here to submit an update."
  - step: Click the "Click here to submit an update" link.
    results:
    - A right-hand drawer opens displaying a login form.
  - step: Log in as "Celestial Frontier Press" using the credentials provided on the testdrive page.
    results:
    - The update request form for the journal "Journal of Exoplanetary Biosignatures" is displayed.
  - step: Without logging out, return to the public page of "Journal of Exoplanetary Biosignatures".
    results:
    - In the "Journal metadata" column, in the "Publisher" tile, a message is displayed "This is your journal! Help us keep your record accurate. Click here to submit an update."
  - step: Click the "Click here to submit an update" link.
    results:
    - The update request form for the journal "Journal of Exoplanetary Biosignatures" is displayed.
  - step: Without logging out, go to the public page of "Annals of Stellar Habitat Studies" at /toc/9555-2777.
    results:
    - In the "Journal metadata" column, in the "Publisher" tile, no update request link is displayed.
  - step: Log out.
  - step: Go to the public page of "Annals of Stellar Habitat Studies".
    results:
    - In the "Journal metadata" column, in the "Publisher" tile, the update request link is displayed.
  - step: Click the "Click here to submit an update" link.
    results:
    - A right-hand drawer opens displaying a login form.
  - step: Log in as "Celestial Frontier Press" using the credentials provided on the testdrive page.
    results:
    - You are redirected to the "My journals" section of the Publisher Dashboard.
    - A message is displayed at the top of the page "You are not the owner of a journal you're trying to access. Here are the journals associated with your account."
