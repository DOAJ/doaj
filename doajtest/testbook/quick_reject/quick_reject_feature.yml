suite: Quick Reject
testset: Quick Reject Feature
tests:
- title: Edit a Rejected Application
  context:
    role: admin
  steps:
  - step: Go to the "Applications/Update Requests" page in the Administration area
  - step: Select a "Rejected" application (e.g. by selecting "Rejected" from the "Application
      Status" facet on the left), and click "View finished application"
    results:
    - The applicaiton review page is shown
    - The application is in status "Rejected"
    - There is no "Quick Reject" button shown on the page
  - step: Click the "Unlock and Close" button

- title: Edit an Accepted Application
  context:
    role: admin
  steps:
  - step: Go to the "Applications/Update Requests" page in the Administration area
  - step: Select an "Accepted" application (e.g. by selecting "Accepted" from the
      "Application Status" facet on the left), and click  "View finished application"
    results:
    - The applicaiton review page is shown
    - The application is in status "Accepted"
    - There is no "Quick Reject" button shown on the page
  - step: Click the "Unlock and Close" button

- title: Select a pre-determined reject reason only
  context:
    role: admin
  steps:
  - step: Go to the "Applications" page in the Administration area
  - step: Select an application that is not either "Accepted" or "Rejected" (e.g.
      by selecting "Pending" from the "Application Status" facet on the left), and
      click Review application
    results:
    - The applicaiton review page is shown
    - The "Quick Reject" button is in the functions sidebar of the form
  - step: Click the button, and select a reason for rejection from the pull-down menu.  Select any reason
      except "Other".  Do not enter any text in the additional information box
  - step: click "Quick Reject"
    results:
    - A flash message is shown reflecting your reason for rejection
    - A flash message is shown saying that the user has been notified
    - The applicaiton review page is shown
    - The application is in status "Rejected"
    - There is no "Quick Reject" button shown on the page
    - There is a note attached to the application at the current date/time which contains the reason for rejection
  - step: Click the "Unlock and Close" button, and return to the search page
  - step: Clear your search and then search for the application you rejected (e.g. by its ISSN)
    results:
    - The application appears in the search results with status "Rejected"
    - The application now has a "Date Rejected" date in the metadata

- title: Select a pre-determined reject reason and add custom text
  context:
    role: admin
  steps:
  - step: Go to the "Applications/Update Requests" page in the Administration area
  - step: Select an application that is not either "Accepted" or "Rejected" (e.g.
      by selecting "Pending" from the "Application Status" facet on the left), and
      click Review application
    results:
    - The applicaiton review page is shown
    - The "Quick Reject" feature is shown above the application form
  - step: Select a reason for rejection from the pull-down menu.  Select any reason
      except "Other".
  - step: Enter some free-text in the additional information box
  - step: click "Quick Reject"
    results:
    - A flash message is shown reflecting your reason for rejection
    - A flash message is shown saying that the user has been notified
    - The applicaiton review page is shown
    - The application is in status "Rejected"
    - There is no "Quick Reject" button shown on the page
    - There is a note attached to the application at the current date/time which contains the reason for rejection, 
      along with the free-text you entered
  - step: Click the "Unlock and Close" button

- title: Provide a custom rejection reason
  context:
    role: admin
  steps:
  - step: Go to the "Applications/Update Requests" page in the Administration area
  - step: Select an application that is not either "Accepted" or "Rejected" (e.g.
      by selecting "Pending" from the "Application Status" facet on the left), and
      click Review application
    results:
    - The applicaiton review page is shown
    - The "Quick Reject" feature is shown above the application form
  - step: Select "Other" from the pull-down menu of reasons for rejection
  - step: Enter some free-text in the additional information box
  - step: click "Quick Reject"
    results:
    - A flash message is shown reflecting your reason for rejection
    - A flash message is shown saying that the user has been notified
    - The applicaiton review page is shown
    - The application is in status "Rejected"
    - There is no "Quick Reject" button shown on the page
    - There is a note attached to the application at the current date/time which contains the free-text you entered
  - step: Click the "Unlock and Close" button

- title: Submit an invalid reject reason
  context:
    role: admin
  steps:
  - step: Go to the "Applications/Update Requests" page in the Administration area
  - step: Select an application that is not either "Accepted" or "Rejected" (e.g.
      by selecting "Pending" from the "Application Status" facet on the left), and
      click Review application
    results:
    - The applicaiton review page is shown
    - The "Quick Reject" feature is shown above the application form
  - step: Select "Other" from the pull-down menu of reasons for rejection.  Do not
      enter any free text in the additional information box
  - step: click "Quick Reject"
    results:
    - An alert popup appears which reads "When selecting 'Other' as a reason for rejection,
      you must provide additional information"
    - The "Quick Reject" feature is shown above the application form
    - The application status has not changed
  - step: Click the "Unlock and Close" button
