{% extends "publisher/publisher_base.html" %}

{% set form_id = "view_application" %}
{% set formulaic_after = url_for("publisher.index") %}
{% set form_action = url_for("publisher.application_readonly", application_id=obj.id) %}

{% set js_validation = False %}
{% set auto_save = 0 %}
{% set TAB1 = {"title": "Open access compliance", "fieldsets": ["basic_compliance"]} %}
{% set TAB2 = {"title": "About the Journal", "fieldsets": ["about_the_journal", "publisher", "society_or_institution"]} %}
{% set TAB3 = {"title": "Copyright & licensing", "fieldsets": ["licensing", "embedded_licensing", "copyright"]} %}
{% set TAB4 = {"title": "Editorial", "fieldsets": ["peer_review", "plagiarism", "editorial"]} %}
{% set TAB5 = {"title": "Business model", "fieldsets": ["apc", "apc_waivers", "other_fees"]} %}
{% set TAB6 = {"title": "Best practice", "fieldsets": ["archiving_policy", "deposit_policy", "unique_identifiers"]} %}
{% set FORM = [TAB1, TAB2, TAB3, TAB4, TAB5, TAB6] %}

{% block page_title %}(Read-only) {{ obj.bibjson().title }}{% endblock %}

{% block publisher_content scoped %}

    {% set related_journal = obj.related_journal_object %}

{% if obj["es_type"] == "application"
        and obj.application_type == "update_request"
        and obj.application_status == constants.APPLICATION_STATUS_REJECTED
        and (not related_journal or not related_journal.is_in_doaj()) %}
        <h2 class="alert">
            <span data-feather="alert-triangle" aria-hidden="true"></span>
            Journal has been withdrawn or deleted. This update request was automatically rejected.
        </h2>
    {% endif %}

    <body id="apply">
    <main class="container">
        <div class="row">
            <div class="col-md-8">
                <section class="page-content">
                    <form id="{{ form_id }}"
                          data-context = "{{ formulaic_context.name }}"
                          class="application_form"
                          novalidate
                          action="{{ form_action }}"
                          method="post"
                          data-formulaic-after="{{ formulaic_after }}">

                        {% include "application_form/_fieldsets.html" %}

                        <div class="tab form-section">
                            {% include "application_form/07-review/index.html" %}
                        </div>
                    </form>
                </section>
            </div>

            <div class="col-md-4">
                <div class="row">
                    {% include "application_form/aside_menu.html" %}
                </div>
            </div>
        </div>
    </main>
    </body>
{% endblock %}

{% block extra_js_bottom scoped %}
    {% include "application_form/js/_form_js.html" %}
{% endblock %}
